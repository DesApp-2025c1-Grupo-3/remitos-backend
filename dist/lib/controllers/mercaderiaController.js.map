{"version":3,"sources":["../../../lib/controllers/mercaderiaController.js"],"names":["includes","require","Remito","Estado","Mercaderia","message","where","controller","getMercaderia","req","res","mercaderia","findAll","activo","include","model","as","status","json","getMercaderiaById","id","params","updateMercaderia","tipoMercaderia","valorDeclarado","volumenMetrosCubico","pesoMercaderia","cantidadBobinas","cantidadRacks","cantidadBultos","cantidadPallets","requisitosEspeciales","remitosId","estadoId","body","idMercaderia","findByPk","update","createMercaderia","create","deleteMercaderia","mercaderiaId","activateMercaderia","module","exports"],"mappings":"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","sourcesContent":["const { includes } = require(\"lodash\");\nconst { Remito, Estado, Mercaderia } = require(\"../models\");\nconst { message } = require(\"../schemas/estadoSchema\");\nconst { where } = require(\"sequelize\");\nconst controller = {};\n\nconst getMercaderia = async (req, res) => {\n  const mercaderia = await Mercaderia.findAll(\n    { where: { activo: true } },\n    {\n      include: { model: Estado, as: \"estado\" },\n    }\n  );\n\n  res.status(200).json(mercaderia);\n};\ncontroller.getMercaderia = getMercaderia;\n\nconst getMercaderiaById = async (req, res) => {\n  const id = req.params.id;\n  const mercaderia = await Mercaderia.findAll(id, {\n    include: { model: Estado, as: \"estado\" },\n  });\n  res.status(200).json(mercaderia);\n}; //Consultar si se muestran los eliminados con activo = false\ncontroller.getMercaderiaById = getMercaderiaById;\n\nconst updateMercaderia = async (req, res) => {\n  const {\n    tipoMercaderia,\n    valorDeclarado,\n    volumenMetrosCubico,\n    pesoMercaderia,\n    cantidadBobinas,\n    cantidadRacks,\n    cantidadBultos,\n    cantidadPallets,\n    requisitosEspeciales,\n    activo,\n    remitosId,\n    estadoId,\n  } = req.body;\n  const idMercaderia = req.params.id;\n  const mercaderia = await Mercaderia.findByPk(idMercaderia);\n  await mercaderia.update({\n    tipoMercaderia,\n    valorDeclarado,\n    volumenMetrosCubico,\n    pesoMercaderia,\n    cantidadBobinas,\n    cantidadRacks,\n    cantidadBultos,\n    cantidadPallets,\n    requisitosEspeciales,\n    activo,\n    remitosId,\n    estadoId,\n  });\n  res.status(200).json(mercaderia);\n};\ncontroller.updateMercaderia = updateMercaderia;\n\nconst createMercaderia = async (req, res) => {\n  const {\n    tipoMercaderia,\n    valorDeclarado,\n    volumenMetrosCubico,\n    pesoMercaderia,\n    cantidadBobinas,\n    cantidadRacks,\n    cantidadBultos,\n    cantidadPallets,\n    requisitosEspeciales,\n    activo,\n    remitosId,\n    estadoId,\n  } = req.body;\n  const mercaderia = await Mercaderia.create(\n    tipoMercaderia,\n    valorDeclarado,\n    volumenMetrosCubico,\n    pesoMercaderia,\n    cantidadBobinas,\n    cantidadRacks,\n    cantidadBultos,\n    cantidadPallets,\n    requisitosEspeciales,\n    activo,\n    remitosId,\n    estadoId\n  );\n  res.status(201).json(mercaderia);\n};\ncontroller.createMercaderia = createMercaderia;\n\nconst deleteMercaderia = async (req, res) => {\n  const mercaderiaId = req.params.id;\n  const mercaderia = await Mercaderia.findByPk(mercaderiaId);\n  await mercaderia.update({ activo: false });\n  res.status(200).json({ message: \"Mercaderia eliminada.\" });\n};\ncontroller.deleteMercaderia = deleteMercaderia;\n\nconst activateMercaderia = async (req, res) => {\n  const mercaderiaId = req.params.id;\n  const mercaderia = await Mercaderia.findByPk(mercaderiaId);\n  await mercaderia.update({ activo: true });\n  res.status(200).json(mercaderia);\n};\ncontroller.activateMercaderia = activateMercaderia;\n\nmodule.exports = controller;\n"],"file":"mercaderiaController.js"}