{"version":3,"sources":["../../../lib/controllers/destinoController.js"],"names":["where","require","Destino","Contacto","message","controller","getDestino","req","res","destinos","findAll","include","model","as","status","json","getDestinoById","id","params","getDestinoFiltrado","pais","provincia","localidad","query","filtros","createDestino","destino","body","nuevoDestino","create","createDestinoWithContacto","direccion","personaAutorizada","correoElectronico","telefono","nuevoContacto","destinoId","destinoConContacto","findByPk","updateDestino","idDestino","update","deleteDestino","destroy","module","exports"],"mappings":"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","sourcesContent":["const { where } = require(\"sequelize\");\nconst { Destino, Contacto } = require(\"../models\");\nconst { message } = require(\"../schemas/estadoSchema\");\nconst controller = {};\n\nconst getDestino = async (req, res) => {\n  const destinos = await Destino.findAll({\n    include: { model: Contacto, as: \"contactos\" },\n  });\n  res.status(200).json(destinos);\n};\ncontroller.getDestino = getDestino;\n\nconst getDestinoById = async (req, res) => {\n  const id = req.params.id;\n  const destinos = await Destino.findAll(id, {\n    include: { model: Contacto, as: \"contactos\" },\n  });\n  res.status(200).json(destinos);\n};\ncontroller.getDestinoById = getDestinoById;\n\nconst getDestinoFiltrado = async(req,res)=>{\n  const {pais,provincia,localidad} = req.query\n  const filtros = {}\n  if(pais) filtros.pais = pais\n  if(provincia) filtros.provincia = provincia\n  if(localidad) filtros.localidad = localidad\n  const destinos = await Destino.findAll({where:filtros})\n  res.status(200).json(destinos)\n}\ncontroller.getDestinoFiltrado = getDestinoFiltrado\n\nconst createDestino = async (req, res) => {\n  const destino = req.body;\n  const nuevoDestino = await Destino.create(destino);\n  res.status(201).json(nuevoDestino);\n};\ncontroller.createDestino = createDestino;\n\nconst createDestinoWithContacto = async (req, res) => {\n  const {\n    pais,\n    provincia,\n    localidad,\n    direccion,\n    personaAutorizada,\n    correoElectronico,\n    telefono,\n  } = req.body;\n  const destino = await Destino.create({\n    pais,\n    provincia,\n    localidad,\n    direccion,\n  });\n  const nuevoContacto = await Contacto.create({\n    personaAutorizada,\n    correoElectronico,\n    telefono,\n    destinoId: destino.id,\n  });\n  const destinoConContacto = await Destino.findByPk(destino.id, {\n    include: {\n      model: Contacto,\n      as: \"contactos\",\n    },\n  });\n  res.status(200).json(destinoConContacto);\n};\ncontroller.createDestinoWithContacto = createDestinoWithContacto;\n\nconst updateDestino = async (req, res) => {\n  const { pais, provincia, localidad, direccion } = req.body;\n  const idDestino = req.params.id;\n  const destino = await Destino.findByPk(idDestino);\n  await destino.update({ pais, provincia, localidad, direccion });\n  res.status(200).json(destino);\n};\ncontroller.updateDestino = updateDestino;\n\nconst deleteDestino = async (req, res) => {\n  const idDestino = req.params.id;\n  const destino = await Destino.destroy({ where: { id: idDestino } });\n  res.status(200).json({ message: \"Destino eliminado correctamente\" });\n};\ncontroller.deleteDestino = deleteDestino;\n\nmodule.exports = controller;\n"],"file":"destinoController.js"}