{"version":3,"sources":["../../../lib/controllers/destinoController.js"],"names":["Destino","Contacto","require","message","controller","getDestino","req","res","destinos","findAll","include","model","as","status","json","getDestinoById","id","params","createDestino","destino","body","nuevoDestino","create","createDestinoWithContacto","pais","provincia","localidad","direccion","personaAutorizada","correoElectronico","telefono","nuevoContacto","destinoId","destinoConContacto","findByPk","updateDestino","idDestino","update","deleteDestino","destroy","where","module","exports"],"mappings":"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","sourcesContent":["const { Destino, Contacto } = require(\"../models\");\r\nconst { message } = require(\"../schemas/estadoSchema\");\r\nconst controller = {};\r\n\r\nconst getDestino = async (req, res) => {\r\n  const destinos = await Destino.findAll({include:{model: Contacto, as:\"contactos\"}});\r\n  res.status(200).json(destinos);\r\n};\r\ncontroller.getDestino = getDestino;\r\n\r\nconst getDestinoById = async (req, res) => {\r\n  const id = req.params.id;\r\n  const destinos = await Destino.findAll(id,{include:{model: Contacto, as:\"contactos\"}});\r\n  res.status(200).json(destinos);\r\n};\r\ncontroller.getDestinoById = getDestinoById;\r\n\r\nconst createDestino = async (req, res) => {\r\n  const destino = req.body;\r\n  const nuevoDestino = await Destino.create(destino);\r\n  res.status(201).json(nuevoDestino);\r\n};\r\ncontroller.createDestino = createDestino;\r\n\r\nconst createDestinoWithContacto = async (req, res) => {\r\n  const {\r\n    pais,\r\n    provincia,\r\n    localidad,\r\n    direccion,\r\n    personaAutorizada,\r\n    correoElectronico,\r\n    telefono,\r\n  } = req.body;\r\n  const destino = await Destino.create({\r\n    pais,\r\n    provincia,\r\n    localidad,\r\n    direccion,\r\n  });\r\n  const nuevoContacto = await Contacto.create({\r\n    personaAutorizada,\r\n    correoElectronico,\r\n    telefono,\r\n    destinoId: destino.id,\r\n  });\r\n  const destinoConContacto = await Destino.findByPk(destino.id, {\r\n    include: {\r\n      model: Contacto,\r\n      as: \"contactos\",\r\n    },\r\n  });\r\n  res.status(200).json(destinoConContacto);\r\n};\r\ncontroller.createDestinoWithContacto = createDestinoWithContacto;\r\n\r\nconst updateDestino = async (req, res) => {\r\n  const { pais, provincia, localidad, direccion } = req.body;\r\n  const idDestino = req.params.id;\r\n  const destino = await Destino.findByPk(idDestino);\r\n  await destino.update({ pais, provincia, localidad, direccion });\r\n  res.status(200).json(destino);\r\n};\r\ncontroller.updateDestino = updateDestino;\r\n\r\nconst deleteDestino = async (req, res) => {\r\n  const idDestino = req.params.id;\r\n  const destino = await Destino.destroy({ where: { id: idDestino } });\r\n  res.status(200).json({ message: \"Destino eliminado correctamente\" });\r\n};\r\ncontroller.deleteDestino = deleteDestino;\r\n\r\nmodule.exports = controller;\r\n"],"file":"destinoController.js"}