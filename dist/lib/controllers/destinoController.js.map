{"version":3,"sources":["../../../lib/controllers/destinoController.js"],"names":["Destino","Contacto","require","message","controller","getDestino","req","res","destinos","findAll","status","json","getDestinoById","id","params","createDestino","destino","body","nuevoDestino","create","createDestinoWithContacto","pais","provincia","localidad","direccion","personaAutorizada","correoElectronico","telefono","nuevoContacto","destinoId","destinoConContacto","findByPk","include","model","as","updateDestino","idDestino","update","deleteDestino","destroy","where","module","exports"],"mappings":"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","sourcesContent":["const { Destino, Contacto } = require(\"../models\")\r\nconst { message } = require(\"../schemas/estadoSchema\")\r\nconst controller = {}\r\n\r\nconst getDestino = async (req, res) => {\r\n    const destinos = await Destino.findAll()\r\n    res.status(200).json(destinos)\r\n}\r\ncontroller.getDestino = getDestino\r\n\r\nconst getDestinoById = async (req, res) => {\r\n    const id = req.params.id\r\n    const destinos = await Destino.findAll(id)\r\n    res.status(200).json(destinos)\r\n}\r\ncontroller.getDestinoById = getDestinoById\r\n\r\nconst createDestino = async (req, res) => {\r\n    const destino = req.body\r\n    const nuevoDestino = await Destino.create(destino)\r\n    res.status(201).json(nuevoDestino)\r\n}\r\ncontroller.createDestino = createDestino\r\n\r\nconst createDestinoWithContacto = async (req, res) => {\r\n    const { pais, provincia, localidad, direccion, personaAutorizada,\r\n        correoElectronico, telefono } = req.body\r\n    const destino = await Destino.create({ pais, provincia, localidad, direccion })\r\n    const nuevoContacto = await Contacto.create({\r\n        personaAutorizada,\r\n        correoElectronico,\r\n        telefono,\r\n        destinoId: destino.id,\r\n    });\r\n    const destinoConContacto = await Destino.findByPk(destino.id, {\r\n        include: {\r\n            model: Contacto,\r\n            as: \"contactos\",\r\n        },\r\n    });\r\n    res.status(200).json(destinoConContacto)\r\n}\r\ncontroller.createDestinoWithContacto = createDestinoWithContacto\r\n\r\n\r\nconst updateDestino = async (req, res) => {\r\n    const { pais, provincia, localidad, direccion } = req.body\r\n    const idDestino = req.params.id\r\n    const destino = await Destino.findByPk(idDestino)\r\n    await destino.update({ pais, provincia, localidad, direccion })\r\n    res.status(200).json(destino)\r\n}\r\ncontroller.updateDestino = updateDestino\r\n\r\nconst deleteDestino = async (req, res) => {\r\n    const idDestino = req.params.id\r\n    const destino = await Destino.destroy({ where: { id: idDestino } })\r\n    res.status(200).json({ message: \"Destino eliminado correctamente\" })\r\n}\r\ncontroller.deleteDestino = deleteDestino\r\n\r\nmodule.exports = controller"],"file":"destinoController.js"}