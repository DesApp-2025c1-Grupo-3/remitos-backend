{"version":3,"sources":["../../../lib/controllers/remitoController.js"],"names":["Remito","Cliente","Destino","Contacto","require","message","controller","getRemitos","req","res","remitos","findAll","status","json","getRemitoById","id","params","remito","findByPk","include","model","as","createRemito","numeroAsignado","tipoMercaderia","valorDeclarado","volumenMetrosCubico","pesoMercaderia","cantidadBobinas","cantidadRacks","cantidadBultos","cantidadPallets","requisitosEspeciales","observaciones","archivoAdjunto","body","fechaEmision","Date","create","createRemitoWithClienteAndDestino","pais","provincia","localidad","direccionD","personaAutorizadaD","correoElectronicoD","telefonoD","razonSocial","direccionC","cuit_rut","tipoEmpresa","personaAutorizada","correoElectronico","telefono","destino","nuevoContactoDestino","destinoId","cliente","nuevoContactoCliente","clienteId","remitoWithDestinoAndCliente","updateRemito","idRemito","update","deleteRemito","destroy","module","exports"],"mappings":"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","sourcesContent":["const { Remito, Cliente, Destino, Contacto } = require(\"../models\");\nconst { message } = require(\"../schemas/estadoSchema\");\nconst controller = {};\n\nconst getRemitos = async (req, res) => {\n    const remitos = await Remito.findAll()\n    res.status(200).json(remitos)\n}\ncontroller.getRemitos = getRemitos\n\nconst getRemitoById = async (req, res) => {\n    const id = req.params.id\n    const remito = await Remito.findByPk(id, {\n        include: [{\n            model: Destino,\n            as: \"destino\"\n        },\n        {\n            model: Cliente,\n            as: \"cliente\"\n        }\n        ]\n    })\n    res.status(200).json(remito)\n}\ncontroller.getRemitoById = getRemitoById\n\nconst createRemito = async (req, res) => {\n    const { numeroAsignado, tipoMercaderia, valorDeclarado, volumenMetrosCubico, pesoMercaderia, cantidadBobinas, cantidadRacks, cantidadBultos, cantidadPallets, requisitosEspeciales, observaciones, archivoAdjunto } = req.body\n    const fechaEmision = new Date();\n    const remito = await Remito.create({ numeroAsignado, tipoMercaderia, valorDeclarado, volumenMetrosCubico, pesoMercaderia, fechaEmision, cantidadBobinas, cantidadRacks, cantidadBultos, cantidadPallets, requisitosEspeciales, observaciones, archivoAdjunto })\n    res.status(201).json(remito)\n}\ncontroller.createRemito = createRemito\n\nconst createRemitoWithClienteAndDestino = async (req, res) => {\n    const { numeroAsignado, tipoMercaderia, valorDeclarado, volumenMetrosCubico, pesoMercaderia, cantidadBobinas, cantidadRacks, cantidadBultos, cantidadPallets, requisitosEspeciales, observaciones, archivoAdjunto, pais, provincia, localidad, direccionD, personaAutorizadaD, correoElectronicoD, telefonoD, razonSocial, direccionC, cuit_rut, tipoEmpresa, personaAutorizada, correoElectronico, telefono } = req.body\n    const fechaEmision = new Date();\n    const remito = await Remito.create({ numeroAsignado, tipoMercaderia, valorDeclarado, volumenMetrosCubico, pesoMercaderia, fechaEmision, cantidadBobinas, cantidadRacks, cantidadBultos, cantidadPallets, requisitosEspeciales, observaciones, archivoAdjunto })\n    const destino = await Destino.create({\n        pais,\n        provincia,\n        localidad,\n        direccionD,\n    });\n    const nuevoContactoDestino = await Contacto.create({\n        personaAutorizadaD,\n        correoElectronicoD,\n        telefonoD,\n        destinoId: destino.id,\n    });\n    const cliente = await Cliente.create({\n        razonSocial,\n        cuit_rut,\n        direccionC,\n        tipoEmpresa,\n    });\n    const nuevoContactoCliente = await Contacto.create({\n        personaAutorizada,\n        correoElectronico,\n        telefono,\n        clienteId: cliente.id,\n    });\n    const remitoWithDestinoAndCliente = await Remito.findByPk(remito.id, {\n        include: [{\n            model: Destino,\n            as: \"destino\"\n        },\n        {\n            model: Cliente,\n            as: \"cliente\"\n        }\n        ]\n    })\n    res.status(201).json(remitoWithDestinoAndCliente)\n}\ncontroller.createRemitoWithClienteAndDestino = createRemitoWithClienteAndDestino\n\nconst updateRemito = async (req, res) => {\n    const idRemito = req.params.id\n    const { numeroAsignado, tipoMercaderia, valorDeclarado, volumenMetrosCubico, pesoMercaderia, fechaEmision, cantidadBobinas, cantidadRacks, cantidadBultos, cantidadPallets, requisitosEspeciales, observaciones, archivoAdjunto } = req.body\n    const remito = await Remito.findByPk(idRemito)\n    await remito.update({ numeroAsignado, tipoMercaderia, valorDeclarado, volumenMetrosCubico, pesoMercaderia, fechaEmision, cantidadBobinas, cantidadRacks, cantidadBultos, cantidadPallets, requisitosEspeciales, observaciones, archivoAdjunto })\n    res.status(200).json(remito)\n}\ncontroller.updateRemito = updateRemito\n\nconst deleteRemito = async(req,res)=>{\n    const id = req.params.id\n    const remito = await Remito.findByPk(id)\n    await remito.destroy()\n    res.status(200).json({message: \"Remito eliminado correctamente\"})\n}\ncontroller.deleteRemito = deleteRemito\n\nmodule.exports = controller;\n"],"file":"remitoController.js"}