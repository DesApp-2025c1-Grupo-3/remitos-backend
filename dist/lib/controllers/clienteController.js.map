{"version":3,"sources":["../../../lib/controllers/clienteController.js"],"names":["where","require","Cliente","Contacto","message","controller","getCliente","req","res","clientes","findAll","include","model","as","status","json","getClienteById","id","params","cliente","findByPk","createCliente","body","nuevoCliente","create","createClienteWithContacto","razonSocial","cuit_rut","direccion","tipoEmpresa","personaAutorizada","correoElectronico","telefono","nuevoContacto","clienteId","clienteConContactos","deleteCliente","idCliente","destroy","updateCliente","update","module","exports"],"mappings":"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","sourcesContent":["const { where } = require(\"sequelize\");\nconst { Cliente } = require(\"../models\");\nconst { Contacto } = require(\"../models\");\nconst { message } = require(\"../schemas/estadoSchema\");\nconst controller = {};\n\nconst getCliente = async (req, res) => {\n  const clientes = await Cliente.findAll({\n    include: {\n      model: Contacto,\n      as: \"contactos\",\n    },\n  });\n  res.status(200).json(clientes);\n};\ncontroller.getCliente = getCliente;\n\nconst getClienteById = async (req, res) => {\n  const id = req.params.id;\n  const cliente = await Cliente.findByPk(id, {\n    include: {\n      model: Contacto,\n      as: \"contactos\",\n    },\n  });\n  res.status(200).json(cliente);\n};\ncontroller.getClienteById = getClienteById;\n\nconst createCliente = async (req, res) => {\n  const cliente = req.body;\n  const nuevoCliente = await Cliente.create(cliente);\n  res.status(201).json(nuevoCliente);\n};\n\ncontroller.createCliente = createCliente;\n\nconst createClienteWithContacto = async (req, res) => {\n  const {razonSocial,cuit_rut,direccion,tipoEmpresa,personaAutorizada,\n    correoElectronico,telefono} = req.body;\n  const cliente = await Cliente.create({\n    razonSocial,    cuit_rut,\n    direccion,\n    tipoEmpresa,\n  });\n  const nuevoContacto = await Contacto.create({\n    personaAutorizada,\n    correoElectronico,\n    telefono,\n    clienteId: cliente.id,\n  });\n  const clienteConContactos = await Cliente.findByPk(cliente.id, {\n    include: {\n      model: Contacto,\n      as: \"contactos\",\n    },\n  });\n  res.status(200).json(clienteConContactos);\n};\ncontroller.createClienteWithContacto = createClienteWithContacto;\n\n\n\nconst deleteCliente = async (req, res) => {\n  const idCliente = req.params.id;\n  const cliente = await Cliente.destroy({ where: { id: idCliente } });\n  res.status(200).json({ message: \"Cliente eliminado correctamente\" });\n};\ncontroller.deleteCliente = deleteCliente;\n\nconst updateCliente = async (req, res) => {\n  const idCliente = req.params.id;\n  const { razonSocial, cuit_rut, direccion, tipoEmpresa } = req.body;\n  const cliente = await Cliente.findByPk(idCliente);\n  await cliente.update({ razonSocial, cuit_rut, direccion, tipoEmpresa });\n  res.status(200).json(cliente);\n};\n\ncontroller.updateCliente = updateCliente;\n\nmodule.exports = controller;\n"],"file":"clienteController.js"}