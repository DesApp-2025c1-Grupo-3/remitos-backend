{"version":3,"sources":["../../../lib/controllers/contactoController.js"],"names":["where","require","Contacto","Cliente","Destino","message","controller","getContacto","req","res","contactos","findAll","include","model","as","status","json","getContactoById","id","params","contacto","findByPk","createContacto","body","nuevoContacto","create","updateContacto","personaAutoriza","correoElectronico","telefono","update","deleteContacto","contactoId","activo","module","exports"],"mappings":"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","sourcesContent":["const { where } = require(\"sequelize\");\r\nconst { Contacto, Cliente, Destino } = require(\"../models\");\r\nconst { message } = require(\"../schemas/estadoSchema\");\r\nconst controller = {};\r\n\r\nconst getContacto = async (req, res) => {\r\n  const contactos = await Contacto.findAll({\r\n    include: {\r\n      model: Cliente,\r\n      as: \"cliente\",\r\n    },\r\n  });\r\n  res.status(200).json(contactos);\r\n};\r\ncontroller.getContacto = getContacto;\r\n\r\nconst getContactoById = async (req, res) => {\r\n  const id = req.params.id;\r\n  const contacto = await Contacto.findByPk(id, {\r\n    include: [\r\n      {\r\n        model: Cliente,\r\n        as: \"cliente\",\r\n      },\r\n      {\r\n        model: Destino,\r\n        as: \"destino\",\r\n      },\r\n    ],\r\n  });\r\n  res.status(200).json(contacto);\r\n};\r\ncontroller.getContactoById = getContactoById;\r\n\r\nconst createContacto = async (req, res) => {\r\n  const contacto = req.body;\r\n  const nuevoContacto = await Contacto.create(contacto);\r\n  res.status(201).json(nuevoContacto);\r\n};\r\ncontroller.createContacto = createContacto;\r\n\r\nconst updateContacto = async (req, res) => {\r\n  const id = req.params.id;\r\n  const { personaAutoriza, correoElectronico, telefono } = req.body;\r\n  const contacto = await Contacto.findByPk(id);\r\n  await contacto.update({ personaAutoriza, correoElectronico, telefono });\r\n  res.status(200).json(contacto);\r\n};\r\ncontroller.updateContacto = updateContacto;\r\n\r\n// Se elimina el contacto marcándolo como inactivo, no se elimina de la base de datos.\r\nconst deleteContacto = async (req, res) => {\r\n  const contactoId = req.params.id;\r\n  const contacto = await Contacto.findByPk(contactoId);\r\n  await contacto.update({ activo: false });\r\n  res.status(200).json({ message: \"Contacto eliminado.\" });\r\n}\r\ncontroller.deleteContacto = deleteContacto;\r\n\r\n/* // Si se quiere eliminar de la base de datos, se puede usar este método\r\n   //  pero es mejor usar un campo activo para no perder el historial de contactos.\r\nconst deleteContacto = async (req, res) => {\r\n  const idContacto = req.params.id;\r\n  const contacto = await Contacto.destroy({ where: { id: idContacto } });\r\n  res.status(200).json({ message: \"Contacto eliminado correctamente\" });\r\n};\r\ncontroller.deleteContacto = deleteContacto;\r\n*/\r\n\r\nmodule.exports = controller;\r\n"],"file":"contactoController.js"}