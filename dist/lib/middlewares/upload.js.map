{"version":3,"sources":["../../../lib/middlewares/upload.js"],"names":["multer","require","path","storage","diskStorage","destination","filename","req","file","cb","ext","extname","originalname","nuevoNombre","Date","now","fileFilter","allowedTypes","includes","mimetype","Error","limits","fileSize","module","exports"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AAEA,MAAME,OAAO,GAAGH,MAAM,CAACI,WAAP,CAAmB;AACjC;AACAC,EAAAA,WAAW,EAAE,iBAFoB;AAGjC;AACAC,EAAAA,QAAQ,EAAE,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AAC3B,UAAMC,GAAG,GAAGR,IAAI,CAACS,OAAL,CAAaH,IAAI,CAACI,YAAlB,CAAZ;AACA,UAAMC,WAAW,GAAI,UAASC,IAAI,CAACC,GAAL,EAAW,GAAEL,GAAI,EAA/C;AACAD,IAAAA,EAAE,CAAC,IAAD,EAAOI,WAAP,CAAF;AACD;AARgC,CAAnB,CAAhB,C,CAWA;;AACA,MAAMG,UAAU,GAAG,CAACT,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AACpC;AACA,QAAMQ,YAAY,GAAG,CAAC,YAAD,EAAe,WAAf,EAA4B,WAA5B,EAAyC,WAAzC,EAAsD,iBAAtD,CAArB;;AAEA,MAAIA,YAAY,CAACC,QAAb,CAAsBV,IAAI,CAACW,QAA3B,CAAJ,EAA0C;AACxCV,IAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACD,GAFD,MAEO;AACLA,IAAAA,EAAE,CAAC,IAAIW,KAAJ,CAAU,uFAAV,CAAD,EAAqG,KAArG,CAAF;AACD;AACF,CATD,C,CAWA;;;AACA,MAAMC,MAAM,GAAG;AACbC,EAAAA,QAAQ,EAAE,IAAI,IAAJ,GAAW,IADR,CACc;;AADd,CAAf;AAIAC,MAAM,CAACC,OAAP,GAAiBxB,MAAM,CAAC;AACtBG,EAAAA,OADsB;AAEtBa,EAAAA,UAFsB;AAGtBK,EAAAA;AAHsB,CAAD,CAAvB,C,CAMA","sourcesContent":["const multer = require(\"multer\");\r\nconst path = require(\"path\");\r\n\r\nconst storage = multer.diskStorage({\r\n  //CREA LA CARPETA\r\n  destination: \"uploads/remitos\",\r\n  //El nombre del archivo\r\n  filename: (req, file, cb) => {\r\n    const ext = path.extname(file.originalname);\r\n    const nuevoNombre = `remito-${Date.now()}${ext}`;\r\n    cb(null, nuevoNombre);\r\n  },\r\n});\r\n\r\n// Configurar filtro de archivos\r\nconst fileFilter = (req, file, cb) => {\r\n  // Permitir solo imágenes y PDFs\r\n  const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'application/pdf'];\r\n  \r\n  if (allowedTypes.includes(file.mimetype)) {\r\n    cb(null, true);\r\n  } else {\r\n    cb(new Error('Tipo de archivo no permitido. Solo se permiten imágenes (JPEG, JPG, PNG, GIF) y PDFs.'), false);\r\n  }\r\n};\r\n\r\n// Configurar límites\r\nconst limits = {\r\n  fileSize: 5 * 1024 * 1024, // 5MB máximo\r\n};\r\n\r\nmodule.exports = multer({ \r\n  storage,\r\n  fileFilter,\r\n  limits\r\n});\r\n\r\n///PERMITE CARGAR ARCHIVO EN ARCHIVO ADJUNTO\r\n"],"file":"upload.js"}