{"version":3,"sources":["../../../lib/middlewares/upload.js"],"names":["multer","require","path","storage","diskStorage","destination","filename","req","file","cb","ext","extname","originalname","nuevoNombre","Date","now","fileFilter","allowedTypes","includes","mimetype","Error","limits","fileSize","module","exports"],"mappings":"AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AAEA,MAAME,OAAO,GAAGH,MAAM,CAACI,WAAP,CAAmB;AACjC;AACAC,EAAAA,WAAW,EAAE,iBAFoB;AAGjC;AACAC,EAAAA,QAAQ,EAAE,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AAC3B,UAAMC,GAAG,GAAGR,IAAI,CAACS,OAAL,CAAaH,IAAI,CAACI,YAAlB,CAAZ;AACA,UAAMC,WAAW,GAAI,UAASC,IAAI,CAACC,GAAL,EAAW,GAAEL,GAAI,EAA/C;AACAD,IAAAA,EAAE,CAAC,IAAD,EAAOI,WAAP,CAAF;AACD;AARgC,CAAnB,CAAhB,C,CAWA;;AACA,MAAMG,UAAU,GAAG,CAACT,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AACpC;AACA,QAAMQ,YAAY,GAAG,CACnB,YADmB,EAEnB,WAFmB,EAGnB,WAHmB,EAInB,WAJmB,EAKnB,iBALmB,CAArB;;AAQA,MAAIA,YAAY,CAACC,QAAb,CAAsBV,IAAI,CAACW,QAA3B,CAAJ,EAA0C;AACxCV,IAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AACD,GAFD,MAEO;AACLA,IAAAA,EAAE,CACA,IAAIW,KAAJ,CACE,uFADF,CADA,EAIA,KAJA,CAAF;AAMD;AACF,CApBD,C,CAsBA;;;AACA,MAAMC,MAAM,GAAG;AACbC,EAAAA,QAAQ,EAAE,IAAI,IAAJ,GAAW,IADR,CACc;;AADd,CAAf;AAIAC,MAAM,CAACC,OAAP,GAAiBxB,MAAM,CAAC;AACtBG,EAAAA,OADsB;AAEtBa,EAAAA,UAFsB;AAGtBK,EAAAA;AAHsB,CAAD,CAAvB,C,CAMA","sourcesContent":["const multer = require(\"multer\");\nconst path = require(\"path\");\n\nconst storage = multer.diskStorage({\n  //CREA LA CARPETA\n  destination: \"uploads/remitos\",\n  //El nombre del archivo\n  filename: (req, file, cb) => {\n    const ext = path.extname(file.originalname);\n    const nuevoNombre = `remito-${Date.now()}${ext}`;\n    cb(null, nuevoNombre);\n  },\n});\n\n// Configurar filtro de archivos\nconst fileFilter = (req, file, cb) => {\n  // Permitir solo imágenes y PDFs\n  const allowedTypes = [\n    \"image/jpeg\",\n    \"image/jpg\",\n    \"image/png\",\n    \"image/gif\",\n    \"application/pdf\",\n  ];\n\n  if (allowedTypes.includes(file.mimetype)) {\n    cb(null, true);\n  } else {\n    cb(\n      new Error(\n        \"Tipo de archivo no permitido. Solo se permiten imágenes (JPEG, JPG, PNG, GIF) y PDFs.\"\n      ),\n      false\n    );\n  }\n};\n\n// Configurar límites\nconst limits = {\n  fileSize: 5 * 1024 * 1024, // 5MB máximo\n};\n\nmodule.exports = multer({\n  storage,\n  fileFilter,\n  limits,\n});\n\n///PERMITE CARGAR ARCHIVO EN ARCHIVO ADJUNTO\n"],"file":"upload.js"}