{"version":3,"sources":["../../bin/www.js"],"names":["debugPkg","require","http","app","db","debug","server","createServer","port","get","sequelize","authenticate","then","console","log","sync","force","listen","catch","error","process","exit","on","onError","onListening","syscall","bind","code","addr","address"],"mappings":"AAAA;;AACA;;AACA;AACA;AACA;;AAEA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,OAAD,CAAxB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,MAAME,GAAG,GAAGF,OAAO,CAAC,YAAD,CAAnB;;AACA,MAAMG,EAAE,GAAGH,OAAO,CAAC,eAAD,CAAlB;;AAEA,MAAMI,KAAK,GAAGL,QAAQ,CAAC,eAAD,CAAtB;AAEA;AACA;AACA;;AACA,MAAMM,MAAM,GAAGJ,IAAI,CAACK,YAAL,CAAkBJ,GAAlB,CAAf;AAEA;AACA;AACA;;AACA,MAAMK,IAAI,GAAGL,GAAG,CAACM,GAAJ,CAAQ,MAAR,CAAb;;AACA,IAAI,CAACD,IAAL,EAAW;AACT,QAAM,qDAAN;AACD,C,CAED;;;AACAJ,EAAE,CAACM,SAAH,CAAaC,YAAb,GACGC,IADH,CACQ,MAAM;AACVC,EAAAA,OAAO,CAACC,GAAR,CAAY,uCAAZ,EADU,CAGV;;AACA,SAAOV,EAAE,CAACM,SAAH,CAAaK,IAAb,CAAkB;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAAlB,CAAP,CAJU,CAKV;AACD,CAPH,EAQGJ,IARH,CAQQ,MAAM;AACVC,EAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AAEAR,EAAAA,MAAM,CAACW,MAAP,CAAcT,IAAd,EAAoB,MAAM;AACxBK,IAAAA,OAAO,CAACC,GAAR,CAAa,mDAAkDN,IAAK,EAApE;AACD,GAFD;AAGD,CAdH,EAeGU,KAfH,CAeUC,KAAD,IAAW;AAChBN,EAAAA,OAAO,CAACM,KAAR,CAAc,sDAAd,EAAsEA,KAAtE;AACAC,EAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACD,CAlBH;AAoBAf,MAAM,CAACgB,EAAP,CAAU,OAAV,EAAmBC,OAAnB;AACAjB,MAAM,CAACgB,EAAP,CAAU,WAAV,EAAuBE,WAAvB;AAEA;AACA;AACA;;AACA,SAASD,OAAT,CAAiBJ,KAAjB,EAAwB;AACtB,MAAIA,KAAK,CAACM,OAAN,KAAkB,QAAtB,EAAgC;AAC9B,UAAMN,KAAN;AACD;;AAED,QAAMO,IAAI,GAAG,OAAOlB,IAAP,KAAgB,QAAhB,GAA4B,QAAOA,IAAK,EAAxC,GAA6C,QAAOA,IAAK,EAAtE;;AAEA,UAAQW,KAAK,CAACQ,IAAd;AACE,SAAK,QAAL;AACEd,MAAAA,OAAO,CAACM,KAAR,CAAe,GAAEO,IAAK,+BAAtB;AACAN,MAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACA;;AACF,SAAK,YAAL;AACER,MAAAA,OAAO,CAACM,KAAR,CAAe,GAAEO,IAAK,oBAAtB;AACAN,MAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACA;;AACF;AACE,YAAMF,KAAN;AAVJ;AAYD;AAED;AACA;AACA;;;AACA,SAASK,WAAT,GAAuB;AACrB,QAAMI,IAAI,GAAGtB,MAAM,CAACuB,OAAP,EAAb;AACA,QAAMH,IAAI,GAAG,OAAOE,IAAP,KAAgB,QAAhB,GAA4B,QAAOA,IAAK,EAAxC,GAA6C,QAAOA,IAAI,CAACpB,IAAK,EAA3E;AACAH,EAAAA,KAAK,CAAE,gBAAeqB,IAAK,EAAtB,CAAL;AACD","sourcesContent":["#!/usr/bin/env node\r\n/* eslint-disable no-console */\r\n/**\r\n * Module dependencies.\r\n */\r\n\r\nconst debugPkg = require('debug');\r\nconst http = require('http');\r\nconst app = require('../lib/app');\r\nconst db = require('../lib/models');\r\n\r\nconst debug = debugPkg('js/www:server');\r\n\r\n/**\r\n * Create HTTP server.\r\n */\r\nconst server = http.createServer(app);\r\n\r\n/**\r\n * Listen on the port set on the app, on all network interfaces.\r\n */\r\nconst port = app.get('port');\r\nif (!port) {\r\n  throw '¬°¬°Hay que setear el port de la aplicaci√≥n Express!!';\r\n}\r\n\r\n// Run sequelize before listen\r\ndb.sequelize.authenticate()\r\n  .then(() => {\r\n    console.log('‚úÖ Conexi√≥n a la base de datos exitosa');\r\n\r\n    // Aqu√≠ agregamos el sync\r\n    return db.sequelize.sync({ force: true }); \r\n    // alter:true ajusta las tablas si hay cambios (m√°s seguro que force:true)\r\n  })\r\n  .then(() => {\r\n    console.log('üìÑ Base de datos sincronizada');\r\n\r\n    server.listen(port, () => {\r\n      console.log(`¬°Aplicaci√≥n iniciada! ====> üåé http://localhost:${port}`);\r\n    });\r\n  })\r\n  .catch((error) => {\r\n    console.error('‚ùå Error conectando o sincronizando la base de datos:', error);\r\n    process.exit(1);\r\n  });\r\n\r\nserver.on('error', onError);\r\nserver.on('listening', onListening);\r\n\r\n/**\r\n * Event listener for HTTP server \"error\" event.\r\n */\r\nfunction onError(error) {\r\n  if (error.syscall !== 'listen') {\r\n    throw error;\r\n  }\r\n\r\n  const bind = typeof port === 'string' ? `Pipe ${port}` : `Port ${port}`;\r\n\r\n  switch (error.code) {\r\n    case 'EACCES':\r\n      console.error(`${bind} requires elevated privileges`);\r\n      process.exit(1);\r\n      break;\r\n    case 'EADDRINUSE':\r\n      console.error(`${bind} is already in use`);\r\n      process.exit(1);\r\n      break;\r\n    default:\r\n      throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Event listener for HTTP server \"listening\" event.\r\n */\r\nfunction onListening() {\r\n  const addr = server.address();\r\n  const bind = typeof addr === 'string' ? `pipe ${addr}` : `port ${addr.port}`;\r\n  debug(`Listening on ${bind}`);\r\n}\r\n\r\n"],"file":"www.js"}